{"version":3,"sources":["webpack:///src/views/public/messageheader.vue","webpack:///./src/views/public/messageheader.vue?07fe","webpack:///./src/views/public/messageheader.vue"],"names":["columns","title","dataIndex","_data","messageheader","data","uploadAction","config","baseURL","add_newenglish","fileList","select","file","uploading","selectedRowKeys","pageSize","currentPage","total","selectedArrStr","type","computed","mounted","this","getLogList","destroyed","methods","onChange","pageNumber","onShowSizeChange","current","console","log","onSelectChange","_this","idArr","map","item","push","id","join","pageNo","_this2","params","$store","state","getMoreDataGet","res","lists","rows","index","$set","deleteOperation","_this3","logInfos","deleteLogList","emptyOperation","_this4","emptyLogList","goTo","$router","path","addnew","handleChange","val","beforeUpload","handleUpload","fd","FormData","append","getUploadPost","public_messageheader","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","display","attrs","name","multiple","action","width","margin-left","defaultValue","on","change","value","icon","disabled","length","loading","click","margin-top","margin-bottom","margin-right","scroll","y","pagination","rowSelection","dataSource","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/47.9cd7d6b7d5681a0fdd3d.js","sourcesContent":["<template>\n    <div>\n        <div class=\"title\">导入报文头Excel</div>\n        <div style=\"display:flex;display:-webkit-flex\">\n          <a-upload name=\"file\" :multiple=\"true\"\n                    action=\"uploadAction\" :beforeUpload=\"beforeUpload\">\n            <a-button>\n              <a-icon type=\"upload\" /> 选择文件\n            </a-button>\n          </a-upload>\n          <a-select defaultValue=\"覆盖\" style=\"width: 120px;margin-left:10px;\" @change=\"handleChange\">\n            <a-select-option value=\"y\">覆盖原报文头</a-select-option>\n            <a-select-option value=\"n\">不覆盖原报文头</a-select-option>\n          </a-select>\n\n          <a-button icon=\"save\"  style=\"margin-left:10px;\" type=\"primary\"\n                    @click=\"handleUpload\"\n                    :disabled=\"fileList.length === 0\"\n                    :loading=\"uploading\" >文件上传</a-button>\n        </div>\n\n\n        <div class=\"title\" style=\"margin-top:20px;\">导入日志</div>\n\n        <div style=\"margin-bottom:20px\">\n\n          <a-button v-if=\"selectedRowKeys.length == 0\" disabled icon=\"delete\" style=\"margin-right:10px;\" @click=\"deleteOperation\">删除</a-button>\n          <a-button v-else icon=\"delete\" style=\"margin-right:10px;\" @click=\"deleteOperation\">删除</a-button>\n            <a-button icon=\"delete\"  style=\"margin-right:10px;\" @click=\"emptyOperation\">清空</a-button>\n\n        </div>\n\n        <div >\n          <a-table :scroll=\"{ y: 200 }\" :pagination=\"{\n          pageSize: pageSize,\n          onShowSizeChange: onShowSizeChange,\n          total: total,\n          onChange: onChange}\" :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\" :columns=\"columns\" :dataSource=\"data\" ></a-table>\n        </div>\n    </div>\n</template>\n\n<script>\n  import config from '../../../src/api/config'\n  const columns = [\n    {\n      title: '日志类型',\n      dataIndex: 'typeStr'\n    }, {\n      title: '日志描述',\n      dataIndex: 'detail'\n    }, {\n      title: '操作用户',\n      dataIndex: 'userId'\n    }, {\n      title: '日志日期',\n      dataIndex: 'time'\n    }\n  ]\n\nlet data = []\nexport default {\n  data () {\n    return {\n      data,\n      columns,\n      uploadAction: config.baseURL + '/resourceImport/import',\n      add_newenglish: false,\n      fileList: [],\n      select: 'y',\n      file: '',\n      uploading: false,\n      selectedRowKeys: [],\n      pageSize: 5,\n      currentPage: 1,\n      total: 7,\n      selectedArrStr: '',\n      type: 2\n    }\n  },\n  computed: {\n\n  },\n  mounted () {\n    let pageSize = this.pageSize\n    this.getLogList(1, pageSize)\n  },\n  destroyed () {},\n  methods: {\n    // 切换分页\n    onChange (pageNumber) {\n      let pageSize = this.pageSize\n      this.currentPage = pageNumber\n      this.getLogList(pageNumber, pageSize)\n    },\n    // 改变size\n    onShowSizeChange (current, pageSize) {\n      console.log(current, pageSize)\n    },\n    // checkbox操作\n    onSelectChange (selectedRowKeys) {\n      let idArr = []\n      selectedRowKeys.map((item) => {\n        idArr.push(this.data[item].id)\n      })\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedArrStr = idArr.join()\n    },\n    // 获取日志列表\n    getLogList (pageNo, pageSize) {\n      let type = this.type\n      let url = '/log/getFileImportLog'\n      let params = {\n        pageNumber: pageNo,\n        pageSize: pageSize,\n        type: type\n      }\n      let response = (res) => {\n        // console.log(res.data.rows)\n        let lists = res.data.rows\n        lists.map((item, index) => {\n          this.$set(item, 'key', index)\n          if (item.type === type) {\n            this.$set(item, 'typeStr', '数据字典导入')\n          }\n        })\n        this.data = lists\n        this.total = res.data.total\n      }\n      this.$store.state.getMoreDataGet(url, params, response)\n    },\n    // 删除操作\n    deleteOperation () {\n      let logInfos = this.selectedArrStr\n      let respFunc = () => {\n        let page = 1\n        let pageSize = this.pageSize\n        this.selectedRowKeys = []\n        this.getLogList(page, pageSize)\n      }\n      this.$store.state.deleteLogList(logInfos, respFunc)\n    },\n    // 清空操作\n    emptyOperation () {\n      let type = this.type\n      let respFunc = () => {\n        let page = 1\n        let pageSize = this.pageSize\n        this.getLogList(page, pageSize)\n      }\n      this.$store.state.emptyLogList(type, respFunc)\n    },\n    goTo () {\n      this.$router.push({path: '/platform'})\n    },\n    addnew () {\n      this.add_newenglish = true\n    },\n    handleChange (val) {\n      this.select = val\n    },\n    beforeUpload (file, fileList) {\n      this.file = file\n      this.fileList = fileList\n      // console.log(this.file)\n      return false\n    },\n    handleUpload () {\n      let fd = new FormData()\n      fd.append('file', this.file) // 传文件\n      fd.append('select', this.select) // 传其他参数\n      let url = '/interfaceheadImport/headImport'\n      let params = fd\n      let response = (res) => {\n        console.log(res)\n      }\n      this.$store.state.getUploadPost(url, params, response, this)\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.title{\n    font-size: 20px;\n    font-weight: bold;\n    margin-bottom:20px;\n}\n.flex{\n    display: flex;\n    display:-webkit-flex;\n    align-items: center;\n}\nul{\n    list-style: none;\n    padding:0;\n}\nli{\n    margin-right: 10px;\n    margin-bottom: 10px;\n}\n#components-layout-demo-top-side-2 .logo {\n  width: 120px;\n  height: 31px;\n  background: rgba(255,255,255,.2);\n  margin: 16px 28px 16px 0;\n  float: left;\n}\n.table-operations {\n  margin-bottom: 16px;\n}\n\n.table-operations > button {\n  margin-right: 8px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/public/messageheader.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"title\"},[_vm._v(\"导入报文头Excel\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"-webkit-flex\"}},[_c('a-upload',{attrs:{\"name\":\"file\",\"multiple\":true,\"action\":\"uploadAction\",\"beforeUpload\":_vm.beforeUpload}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 选择文件\\n        \")],1)],1),_vm._v(\" \"),_c('a-select',{staticStyle:{\"width\":\"120px\",\"margin-left\":\"10px\"},attrs:{\"defaultValue\":\"覆盖\"},on:{\"change\":_vm.handleChange}},[_c('a-select-option',{attrs:{\"value\":\"y\"}},[_vm._v(\"覆盖原报文头\")]),_vm._v(\" \"),_c('a-select-option',{attrs:{\"value\":\"n\"}},[_vm._v(\"不覆盖原报文头\")])],1),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"icon\":\"save\",\"type\":\"primary\",\"disabled\":_vm.fileList.length === 0,\"loading\":_vm.uploading},on:{\"click\":_vm.handleUpload}},[_vm._v(\"文件上传\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"title\",staticStyle:{\"margin-top\":\"20px\"}},[_vm._v(\"导入日志\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-bottom\":\"20px\"}},[(_vm.selectedRowKeys.length == 0)?_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"disabled\":\"\",\"icon\":\"delete\"},on:{\"click\":_vm.deleteOperation}},[_vm._v(\"删除\")]):_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"icon\":\"delete\"},on:{\"click\":_vm.deleteOperation}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('a-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"icon\":\"delete\"},on:{\"click\":_vm.emptyOperation}},[_vm._v(\"清空\")])],1),_vm._v(\" \"),_c('div',[_c('a-table',{attrs:{\"scroll\":{ y: 200 },\"pagination\":{\n      pageSize: _vm.pageSize,\n      onShowSizeChange: _vm.onShowSizeChange,\n      total: _vm.total,\n      onChange: _vm.onChange},\"rowSelection\":{selectedRowKeys: _vm.selectedRowKeys, onChange: _vm.onSelectChange},\"columns\":_vm.columns,\"dataSource\":_vm.data}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-44d9ebfe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/public/messageheader.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-44d9ebfe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./messageheader.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./messageheader.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./messageheader.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-44d9ebfe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./messageheader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-44d9ebfe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/public/messageheader.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}