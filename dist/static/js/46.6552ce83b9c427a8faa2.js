webpackJsonp([46],{Ww9A:function(t,e){},"c+mO":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=[{title:"交易码",dataIndex:"ecode",scopedSlots:{customRender:"ecode"}},{title:"交易名称",dataIndex:"interfaceName",scopedSlots:{customRender:"interfaceName"}},{title:"交易状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"报文头",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"功能描述",dataIndex:"desc",scopedSlots:{customRender:"desc"}},{title:"版本号",dataIndex:"versionId",scopedSlots:{customRender:"versionId"}},{title:"更新时间",dataIndex:"optDate",scopedSlots:{customRender:"optDate"}},{title:"更新用户",dataIndex:"optUser",scopedSlots:{customRender:"optUser"}}],s=[],n=[{title:"字段名称",dataIndex:"structName",scopedSlots:{customRender:"structName"}},{title:"字段别名",dataIndex:"structAlias",scopedSlots:{customRender:"structAlias"}},{title:"类型",dataIndex:"metaType",scopedSlots:{customRender:"metaType"}},{title:"长度",dataIndex:"length",scopedSlots:{customRender:"length"}},{title:"是否必输",dataIndex:"required",scopedSlots:{customRender:"required"}},{title:"备注",dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"属性",dataIndex:"",scopedSlots:{customRender:""}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],o=[],c=[],r={data:function(){var t=this;return{data:o,columns:n,infocolumns:a,infodata:s,allTagData:c,panes:"",isChangeOne:!0,interfaceName:"",interfaceStatus:"",versionCode:"",selectedId:"",rowSelection:{onSelect:function(e,i,a){t.selectedId=e.id,t.isChangeOne=!1},type:"radio"},auditing_advice:"",checkresult:"true",esbuser:"",esbuserData:[],checkremarks:"",userID:"",esbUserId:"",Priority:"",publishdetail:"",publishuserid:"",publishuser:"",auditing_visible:!1,commit_auditing_visible:!1,com_amendment_visible:!1,publish_visible:!1,linkService:!1}},computed:{},mounted:function(){this.getTagsForInterface(),this.getInterInfo(),this.getInterList()},methods:{saveinterfacetag:function(){var t={interfaceId:"UPP0001",Tag:this.allTagData};this.$store.state.getMoreDataPost("/tag/interface",t,function(t){console.log("保存所有标签========"+t.data)})},versionHistory:function(){var t=this.panes,e="/system/interfaceTagHistory";this.panes=t,this.activeKey=e,this.$router.push(e)},getTagsForInterface:function(){var t=this;this.$store.state.getMoreDataGet("/tag/getTagsForInterface",{interfaceId:"UPP0001"},function(e){t.allTagData=e.data})},getInterInfo:function(){var t=this;this.$store.state.getMoreDataGet("/interface/getInterById",{interfaceId:"UPP0001"},function(e){t.infodata.push(e.data),t.interfaceName=e.data.interfaceName,t.versionCode=e.data.version.code,t.interfaceStatus=e.data.status})},getInterList:function(){var t=this;this.$store.state.getMoreDataGet("/ida/getInterfaces",{interfaceId:"UPP0001"},function(e){var i=[];for(var a in e.data.rowNo)i.push(e.data.rowNo[a]);t.data=i})},showDelfirm:function(){var t=this;this.$confirm({title:"是否确认要删除?",okText:"确认",cancelText:"取消",keyboard:!1,onOk:function(){t.deleteinter()},onCancel:function(){}})},deleteinter:function(){var t=this,e={ids:this.selectedId};this.$store.state.getMoreDataDelete("/ida/delete",e,function(e){200===e.returnCode&&t.getInterList()})},moveUp:function(){var t=this,e={id:this.selectedId};this.$store.state.getMoreDataGet("/ida/moveUp",e,function(e){200===e.returnCode&&t.getInterList()})},moveDown:function(){var t=this,e={id:this.selectedId};this.$store.state.getMoreDataGet("/ida/moveDown",e,function(e){200===e.returnCode&&t.getInterList()})},interfaceCheck:function(){var t={interfaceId:"UPP0001",checkOpinion:this.auditing_advice,checkResult:this.checkresult};this.$store.state.getMoreDataPost("/interface/interfaceCheck",t,function(t){})},handleOk:function(){this.checkresult="true",this.interfaceCheck()},handleCancel:function(){this.checkresult="false",this.interfaceCheck()},auditing:function(){this.auditing_visible=!0},choseUser:function(t){this.esbUserId=""+t},checkLevel:function(t){this.Priority=""+t},commitCheck:function(){var t=this,e={interfaceId:"UPP0001",esbUserId:this.esbUserId,priority:this.Priority,remark:this.checkremarks};this.$store.state.getMoreDataPost("/interface/submitInterfaceCheck",e,function(e){t.esbuserData=e.data})},commitauditing:function(){var t=this;this.commit_auditing_visible=!0;this.$store.state.getMoreDataGet("/user/getServiceGovAll",{},function(e){t.esbuserData=e.data})},chosepublishUser:function(t){this.publishuserid=""+t},publishinterface:function(){var t=this,e={interfaceIds:"UPP0001",versionDesc:this.publishdetail,userId:this.publishuserid};this.$store.state.getMoreDataPost("/interface/interfaceRelease",e,function(e){t.esbuserData=e.data})},publish:function(){var t=this;if("3"===this.interfaceStatus){this.publish_visible=!0;this.$store.state.getMoreDataGet("/user/getServiceGovAll",{},function(e){t.esbuserData=e.data})}else this.$confirm({title:"发布",content:"接口状态为审核通过才可发布",okText:"确认",cancelText:"取消"})},com_amendment:function(){if("0"===this.interfaceStatus)this.$confirm({title:"强制修订",content:"该接口已是修订状态",okText:"确认",cancelText:"取消"});else{this.$store.state.getMoreDataPost("/interface/revise",{interfaceIds:"UPP0001"},function(t){console.log(t)})}},showServiceModel:function(){this.linkService=!0;this.$store.state.getMoreDataPost("/operation/getByInterfaceId",{interfaceIds:"UPP0001"},function(t){console.log(t)})},onSelect:function(t,e){console.log("selected",t,e)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"flex"},[i("li",{staticClass:"flex"},[t._v("\n      接口标签\n      "),i("a-input",{staticStyle:{width:"250px",margin:"0 10px 0 10px"},attrs:{placeholder:"请输入机构代码"}})],1),t._v(" "),i("li",[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"save"},on:{click:t.saveinterfacetag}},[t._v("保存")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"edit"},on:{click:t.versionHistory}},[t._v("版本历史")])],1)]),t._v(" "),i("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v("基本信息")]),t._v(" "),i("a-table",{attrs:{columns:t.infocolumns,dataSource:t.infodata,pagination:!1}}),t._v(" "),i("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v("接口定义信息")]),t._v(" "),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"delete"},on:{click:t.showDelfirm}},[t._v("删除")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"save"}},[t._v("保存")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"arrow-up",disabled:t.isChangeOne},on:{click:t.moveUp}},[t._v("上移")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"arrow-down",disabled:t.isChangeOne},on:{click:t.moveDown}},[t._v("下移")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"folder"},on:{click:t.commitauditing}},[t._v("提交审核")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"folder-open"},on:{click:t.auditing}},[t._v("审核")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"file"},on:{click:t.publish}},[t._v("发布")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"edit"},on:{click:t.com_amendment}},[t._v("强制修订")]),t._v(" "),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"plus"},on:{click:t.showServiceModel}},[t._v("关联服务场景")])],1),t._v(" "),i("div",[i("a-table",{attrs:{columns:t.columns,dataSource:t.data,pagination:!0,rowSelection:t.rowSelection},scopedSlots:t._u([{key:"operation",fn:function(e,a,s){return[i("div",{staticClass:"editable-row-operations"},[a.editable?i("span",[i("a",{on:{click:function(){return t.save(a,a.key)}}},[t._v("保存")])]):i("span",[i("a",{on:{click:function(){return t.edit(a.key)}}},[t._v("编辑")])])])]}}])})],1),t._v(" "),i("a-modal",{attrs:{title:"提交审核",okText:"提交审核",cancelText:"取消"},on:{ok:t.commitCheck},model:{value:t.commit_auditing_visible,callback:function(e){t.commit_auditing_visible=e},expression:"commit_auditing_visible"}},[i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      通知ESB：\n      "),i("a-select",{staticClass:"add_ipt",staticStyle:{width:"250px","margin-left":"10px"},attrs:{defaultValue:""},on:{change:t.choseUser},model:{value:t.esbuser,callback:function(e){t.esbuser=e},expression:"esbuser"}},t._l(t.esbuserData,function(e,a){return i("a-select-option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      优先级：\n      "),i("a-select",{staticClass:"add_ipt",staticStyle:{width:"250px","margin-left":"10px"},attrs:{defaultValue:"请选择类型"},on:{change:t.checkLevel},model:{value:t.Priority,callback:function(e){t.Priority=e},expression:"Priority"}},[i("a-select-option",{attrs:{value:"2"}},[t._v("\n          高\n        ")]),t._v(" "),i("a-select-option",{attrs:{value:"1"}},[t._v("\n          中\n        ")]),t._v(" "),i("a-select-option",{attrs:{value:"0"}},[t._v("\n          低\n        ")])],1)],1),t._v(" "),i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      备注说明：\n      "),i("a-textarea",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:""},model:{value:t.checkremarks,callback:function(e){t.checkremarks=e},expression:"checkremarks"}})],1)]),t._v(" "),i("a-modal",{attrs:{title:"审核",okText:"审核通过",cancelText:"驳回"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.auditing_visible,callback:function(e){t.auditing_visible=e},expression:"auditing_visible"}},[i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      审核意见：\n      "),i("a-textarea",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:""},model:{value:t.auditing_advice,callback:function(e){t.auditing_advice=e},expression:"auditing_advice"}})],1)]),t._v(" "),i("a-modal",{attrs:{title:"版本发布",okText:"发布",cancelText:"取消"},on:{ok:t.publishinterface},model:{value:t.publish_visible,callback:function(e){t.publish_visible=e},expression:"publish_visible"}},[i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      接口名称：\n      "),i("span",{staticStyle:{width:"250px","margin-left":"10px"}},[t._v(t._s(t.interfaceName))])]),t._v(" "),i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      版本号：\n      "),i("span",{staticStyle:{width:"250px","margin-left":"10px"}},[t._v(t._s(t.versionCode))])]),t._v(" "),i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      发布说明：\n      "),i("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:""},model:{value:t.publishdetail,callback:function(e){t.publishdetail=e},expression:"publishdetail"}})],1),t._v(" "),i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      通知ESB：\n      "),i("a-select",{staticClass:"add_ipt",staticStyle:{width:"250px","margin-left":"10px"},attrs:{defaultValue:""},on:{change:t.chosepublishUser},model:{value:t.publishuser,callback:function(e){t.publishuser=e},expression:"publishuser"}},t._l(t.esbuserData,function(e,a){return i("a-select-option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)]),t._v(" "),i("a-modal",{attrs:{title:"强制修订",okText:"确定"},model:{value:t.com_amendment_visible,callback:function(e){t.com_amendment_visible=e},expression:"com_amendment_visible"}},[i("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[t._v("\n      该接口已经是修订状态！\n    ")])]),t._v(" "),i("a-modal",{staticClass:"linkService",attrs:{footer:null},model:{value:t.linkService,callback:function(e){t.linkService=e},expression:"linkService"}},[i("a-tree",{attrs:{showLine:"",defaultExpandedKeys:["0-0-0"]},on:{select:t.onSelect}},[i("a-tree-node",{key:"0-0"},[i("span",{staticStyle:{color:"#1890ff"},attrs:{slot:"title"},slot:"title"},[t._v("parent 1")]),t._v(" "),i("a-tree-node",{key:"0-0-0",attrs:{title:"parent 1-0"}},[i("a-tree-node",{key:"0-0-0-0",attrs:{title:"leaf"}}),t._v(" "),i("a-tree-node",{key:"0-0-0-1",attrs:{title:"leaf"}}),t._v(" "),i("a-tree-node",{key:"0-0-0-2",attrs:{title:"leaf"}})],1),t._v(" "),i("a-tree-node",{key:"0-0-1",attrs:{title:"parent 1-1"}},[i("a-tree-node",{key:"0-0-1-0",attrs:{title:"leaf"}})],1),t._v(" "),i("a-tree-node",{key:"0-0-2",attrs:{title:"parent 1-2"}},[i("a-tree-node",{key:"0-0-2-0",attrs:{title:"leaf"}}),t._v(" "),i("a-tree-node",{key:"0-0-2-1",attrs:{title:"leaf"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=i("VU/8")(r,l,!1,function(t){i("Ww9A")},"data-v-46171d79",null);e.default=d.exports}});
//# sourceMappingURL=46.6552ce83b9c427a8faa2.js.map