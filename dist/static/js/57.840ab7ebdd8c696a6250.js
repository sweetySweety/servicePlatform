webpackJsonp([57],{"215V":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("T452"),i=[{title:"日志类型",dataIndex:"typeStr"},{title:"日志描述",dataIndex:"detail"},{title:"操作用户",dataIndex:"userId"},{title:"日志日期",dataIndex:"time"}],n=[],o={components:{ATextarea:a("ufx+").a},data:function(){return{data:n,columns:i,uploadAction:s.a.baseURL+"/resourceImport/import",add_newenglish:!1,file:"",systemId:"",interfaceType:"",isStandard:"",spendInterface:"",esbUser:"",interfaceId:"",messageEsb:"",priority:"",systemList:[],protocolList:[],pageSize:5,currentPage:1,total:7,selectedRowKeys:[],selectedArrStr:"",type:8}},mounted:function(){this.getLogList(1,this.pageSize),this.getSystemList()},watch:{systemId:function(){var t=this.systemId;this.getProtocolList(t)}},destroyed:function(){},methods:{onChange:function(t){var e=this.pageSize;this.currentPage=t,this.getLogList(t,e)},onShowSizeChange:function(t,e){console.log(t,e)},onSelectChange:function(t){var e=this,a=[];t.map(function(t){a.push(e.data[t].id)}),this.selectedRowKeys=t,this.selectedArrStr=a.join()},beforeUpload:function(t,e){return this.file=t,!1},handleRegister:function(){var t=new FormData;t.append("file",this.file),t.append("systemId",this.systemId),t.append("interfaceType",this.interfaceType),t.append("isStandard",this.isStandard),t.append("esbMessage",this.messageEsb),t.append("esbUser",this.esbUser),t.append("interfaceId",this.spendInterface),t.append("priority",this.priority);var e=t;this.$store.state.getUploadPost("/application/retirement",e,function(t){},this)},getSystemList:function(){var t=this;this.$store.state.getMoreDataGet("/system/getAll",{},function(e){t.systemList=e.data})},getProtocolList:function(t){var e=this,a={systemId:t};this.$store.state.getMoreDataStringPost("/protocol/getSystemProtocol",a,function(t){e.protocolList=t.data})},getLogList:function(t,e){var a=this,s=this.type,i={pageNo:t,rowNo:e};this.$store.state.getMoreDataStringPost("/application/getRetirementLog",i,function(t){var e=t.data.row;e.map(function(t,e){a.$set(t,"key",e),t.type===s&&a.$set(t,"typeStr","数据字典导入")}),a.data=e,a.total=t.data.resultCount})},deleteOperation:function(){var t=this,e=this.selectedArrStr;this.$store.state.deleteLogList(e,function(){var e=t.pageSize;t.selectedRowKeys=[],t.getLogList(1,e)})},emptyOperation:function(){var t=this,e=this.type;this.$store.state.emptyLogList(e,function(){var e=t.pageSize;t.getLogList(1,e)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[t._v("填写退役申请单")]),t._v(" "),a("div",[a("a-upload",{attrs:{name:"file",multiple:!0,action:"uploadAction",beforeUpload:t.beforeUpload}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v("选择文件\n      ")],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("a-row",[a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v("所属系统")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.systemId,callback:function(e){t.systemId=e},expression:"systemId"}},t._l(t.systemList,function(e){return a("a-select-option",{key:e.systemId,model:{value:e.systemId,callback:function(a){t.$set(e,"systemId",a)},expression:"item.systemId"}},[t._v(t._s(e.systemChineseName))])}),1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v("接入方向")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.interfaceType,callback:function(e){t.interfaceType=e},expression:"interfaceType"}},[a("a-select-option",{key:3,attrs:{value:"0"}},[t._v("提供方")]),t._v(" "),a("a-select-option",{key:4,attrs:{value:"1"}},[t._v("消费方")])],1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v("须退役的接口")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.spendInterface,callback:function(e){t.spendInterface=e},expression:"spendInterface"}},t._l(t.protocolList,function(e){return a("a-select-option",{key:e.id,attrs:{value:"item.id"}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v(" 是否标准")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.isStandard,callback:function(e){t.isStandard=e},expression:"isStandard"}},[a("a-select-option",{key:5,attrs:{value:"0"}},[t._v("标准")]),t._v(" "),a("a-select-option",{key:6,attrs:{value:"1"}},[t._v("不标准")])],1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v("通知ESB")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.esbUser,callback:function(e){t.esbUser=e},expression:"esbUser"}},t._l(t.protocolList,function(e){return a("a-select-option",{key:e.id,attrs:{value:"item.id"}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:5}},[a("div",{staticClass:"ename"},[t._v("优先级")]),t._v(" "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}},[a("a-select-option",{key:9,attrs:{value:"1"}},[t._v("低 ")]),t._v(" "),a("a-select-option",{key:10,attrs:{value:"2"}},[t._v("中 ")]),t._v(" "),a("a-select-option",{key:11,attrs:{value:"3"}},[t._v("高 ")])],1)],1),t._v(" "),a("a-col",{staticClass:"flex",attrs:{span:10}},[a("div",{staticClass:"ename"},[t._v("通知信息")]),t._v(" "),a("a-textarea",{staticStyle:{"margin-left":"10px"},attrs:{defaultValue:""},model:{value:t.messageEsb,callback:function(e){t.messageEsb=e},expression:"messageEsb"}})],1)],1),t._v(" "),a("a-row",[a("a-button",{attrs:{icon:"save",type:"primary"},on:{click:t.handleRegister}},[t._v("提交")])],1)],1),t._v(" "),a("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v("导入日志")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"delete"},on:{click:t.deleteOperation}},[t._v("删除")]),t._v(" "),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"delete"},on:{click:t.emptyOperation}},[t._v("清空")])],1),t._v(" "),a("div",{staticClass:"scroll_table_border"},[a("a-table",{attrs:{rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},pagination:{pageSize:t.pageSize,onShowSizeChange:t.onShowSizeChange,total:t.total,onChange:t.onChange},columns:t.columns,dataSource:t.data}})],1)])},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("WrFE")},"data-v-22143565",null);e.default=r.exports},WrFE:function(t,e){}});
//# sourceMappingURL=57.840ab7ebdd8c696a6250.js.map