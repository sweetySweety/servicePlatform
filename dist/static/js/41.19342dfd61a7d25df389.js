webpackJsonp([41],{DDUo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("//Fk"),n=a.n(s),i=a("NC6I"),o=a.n(i),l=a("PHrY"),c=[{title:"角色名",dataIndex:"name",scopedSlots:{customRender:"name"}}],r=[{title:"用户代码",dataIndex:"id",scopedSlots:{customRender:"name"}},{title:"用户名称",dataIndex:"name"},{title:"手机号码",dataIndex:"phone"},{title:"电话号码",dataIndex:"userMobile"},{title:"所在系统",dataIndex:"sysId"},{title:"所属机构",dataIndex:"orgName"},{title:"电子邮箱",dataIndex:"email"},{title:"用户状态",dataIndex:"status"},{title:"角色",dataIndex:"roleNames"},{title:"备注",dataIndex:"remark"}],d={name:"usertable",props:["item"],data:function(){return{data:[],columns:r,columns_modal:c,ModalText:"Content of the modal",visible:!1,changepass_visible:!1,confirmLoading:!1,user_id:"",user_code:"",cellphone:"",telphone:"",email:"",org:"",password:"",state:"",remark:"",ischangeone:0,title:"",ischangepassone:0,isintpassone:0,roleList:[],orglist:[],ischoose:0,add_click:0,edit_click:0,stateSelect:"",orgSelect:"",search_id:"",search_name:"",search_org:"",search_state:"",delArray:"",addRole:"",old_pass:"",new_pass:"",com_pass:"",choseOneId:"",orgin_pass:""}},mounted:function(){this.get_AllUser();var e=this;Object(l.A)({pageNo:1,pageSize:10}).then(function(t){console.log(t),200==t.returnCode&&(e.roleList=t.data)}),Object(l.z)({pageNo:1,pageSize:10}).then(function(t){console.log(t),e.orglist=t.data.rows,console.log(e.orglist)})},computed:{rowSelection:function(){var e=this,t=this;this.selectedRowKeys;return{onChange:function(a,s){for(var n in console.log("selectedRowKeys: "+a,"selectedRows: ",s),t.delArray="",0==s.length?t.ischoose=0:t.ischoose=1,s)t.delArray+=s[n].id+",";console.log(t.delArray),1==s.length?(e.ischangeone=1,e.ischangepassone=1,e.isintpassone=1,e.user_id=s[0].id,e.user_code=s[0].name,e.orgSelect=s[0].orgId,e.password=s[0].password,e.cellphone=s[0].userMobile,e.telphone=s[0].userTel,e.email=s[0].email,e.stateSelect=s[0].status,e.choseOneId=s[0].id,console.log("现在的状态是"+e.stateSelect),e.remark=s[0].remark):(e.ischangeone=0,e.ischangepassone=0,e.isintpassone=0)},getCheckboxProps:function(e){return{props:{disabled:"Disabled User"===e.name,name:e.name}}}}},lrowSelection:function(){var e=this;this.selectedRowKeys;return{onChange:function(t,a){for(var s in console.log("selectedRowKeys: "+t,"selectedRows: ",a),e.addRole="",a)e.addRole+=a[s].id+",";console.log(e.addRole)},getCheckboxProps:function(e){return{props:{disabled:"Disabled User"===e.name,name:e.name}}}}}},methods:{init_pass:function(){var e=this;Object(l.m)({userId:e.choseOneId,passWord:123456}).then(function(t){200==t.returnCode&&(e.$message.success("初始化密码成功"),e.changepass_visible=!1)})},c_pass:function(){var e=this;e.orgin_pass!=e.old_pass?e.$message.warning("您输入的密码与旧密码不一致"):e.new_pass==e.old_pass?e.$message.warning("新密码不能和旧密码一样！"):e.new_pass!=e.com_pass?e.$message.warning("新密码输入不一致！"):Object(l.m)({userId:e.choseOneId,passWord:e.new_pass}).then(function(t){200==t.returnCode&&(e.$message.success("修改密码成功"),e.changepass_visible=!1)})},searchUser:function(){var e=this;Object(l.L)({userId:e.search_id,name:e.search_name,orgId:e.search_org,status:e.search_state}).then(function(t){if(console.log(t),200==t.returnCode){for(var a in t.data)0==t.data[a].status?t.data[a].status="正在使用":t.data[a].status="已经离职";e.data=t.data}else 404==t.returnCode&&e.$message.info("未找到用户信息")})},get_AllUser:function(){var e=this;Object(l.B)({pageNo:1,rows:10}).then(function(t){if(console.log(t),console.log(e.data,111),200==t.returnCode){for(var a in t.data.rows)0==t.data.rows[a].status?t.data.rows[a].status="正在使用":t.data.rows[a].status="已经离职";e.data=t.data.rows}})},clear:function(){this.search_id="",this.search_name="",this.search_state=""},handleSearchChange:function(e){console.log("selected "+e)},handleOrgChange:function(e){this.org=""+e},handlesearchOrgChange:function(e){console.log(this.search_org,20313123),this.search_org=""+e},handleStateChange:function(e){this.state=""+e},openchange:function(){this.title="修改角色",this.visible=!0,this.edit_click=1,this.add_click=0},edit_User:function(){var e=this;Object(l.t)({id:e.user_id,name:e.user_code,orgId:e.org,password:o()(e.password),userMobile:e.cellphone,userTel:e.telphone,email:e.email,status:e.state,remark:e.remark}).then(function(t){200==t.returnCode&&(e.visible=!1,setTimeout(function(){e.get_AllUser()},100))})},add_user:function(){var e=this,t=e.addRole;t=t.substring(0,t.length-1),1==e.add_click&&0==e.edit_click?Object(l.e)({id:e.user_id,name:e.user_code,orgId:e.org,password:e.password,userMobile:e.cellphone,userTel:e.telphone,email:e.email,status:e.state,remark:e.remark}).then(function(a){200==a.returnCode&&(Object(l.g)({userId:e.user_id,roleId:t}).then(function(e){e.returnCode}),e.visible=!1,setTimeout(function(){e.get_AllUser()},100))}):0==e.add_click&&1==e.edit_click&&e.edit_User()},showModal:function(){this.visible=!0,this.edit_click=0,this.add_click=1,this.user_id="",this.user_code="",this.org="",this.password="",this.cellphone="",this.telphone="",this.email="",this.stateSelect="",this.remark="",this.title="新增角色"},handleOk:function(e){var t=this;this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout(function(){t.visible=!1,t.confirmLoading=!1},2e3)},handleCancel:function(e){console.log("Clicked cancel button"),this.visible=!1},userDelete:function(){var e=this,t=e.delArray;t=t.substring(0,t.length-1),Object(l.r)({userId:t}).then(function(t){console.log(t),setTimeout(function(){Object(l.B)({pageNo:1,rows:10}).then(function(t){if(console.log(t),200==t.returnCode){for(var a in t.data.rows)0==t.data.rows[a].status?t.data.rows[a].status="正在使用":t.data.rows[a].status="已经离职";e.data=t.data.rows}console.log(e.data,111)})},1e3)})},showConfirm:function(){var e=this;this.$confirm({title:"提示",content:"确定要删除该数据？",onOk:function(){return e.userDelete(),new n.a(function(e,t){setTimeout(Math.random()>.5?e:t,1e3)}).catch(function(){return console.log("Oops errors!")})},onCancel:function(){}})},changePass:function(){this.old_pass="",this.new_pass="",this.com_pass="";var e=this;this.changepass_visible=!0,Object(l.C)({userId:this.choseOneId}).then(function(t){200==t.returnCode&&(e.orgin_pass=t.data.password)})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"title"},[e._v("条件搜索")]),e._v(" "),a("ul",{staticClass:"flex"},[a("li",{staticClass:"flex"},[e._v("\n      用户代码\n      "),a("a-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请输入用户代码"},model:{value:e.search_id,callback:function(t){e.search_id=t},expression:"search_id"}})],1),e._v(" "),a("li",{staticClass:"flex"},[e._v("\n      用户名称\n      "),a("a-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"请输入用户名称"},model:{value:e.search_name,callback:function(t){e.search_name=t},expression:"search_name"}})],1),e._v(" "),a("li",[e._v("\n      所属机构\n      "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},on:{change:e.handlesearchOrgChange},model:{value:e.search_org,callback:function(t){e.search_org=t},expression:"search_org"}},e._l(e.orglist,function(t,s){return a("a-select-option",{key:s,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1),e._v(" "),a("li",{staticClass:"flex"},[e._v("\n      用户状态\n      "),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},on:{change:e.handleSearchChange},model:{value:e.search_state,callback:function(t){e.search_state=t},expression:"search_state"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("正在使用")]),e._v(" "),a("a-select-option",{attrs:{value:"1"}},[e._v("已经离职")])],1),e._v(" "),a("a-button",{staticStyle:{"margin-right":"10px","margin-left":"20px"},attrs:{icon:"search",type:"primary"},on:{click:e.searchUser}},[e._v("查询")]),e._v(" "),a("a-button",{attrs:{icon:"close"},on:{click:e.clear}},[e._v("清空")])],1)]),e._v(" "),a("div",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[e._v("所有用户")]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"plus"},on:{click:e.showModal}},[e._v("新增")]),e._v(" "),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"edit",disabled:0==e.ischangeone},on:{click:e.openchange}},[e._v("修改")]),e._v(" "),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"delete",disabled:0==e.ischoose},on:{click:e.userDelete}},[e._v("删除")]),e._v(" "),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"laptop",disabled:0==e.ischangepassone},on:{click:e.changePass}},[e._v("修改密码")]),e._v(" "),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"laptop",disabled:0==e.isintpassone},on:{click:e.init_pass}},[e._v("初始化密码")])],1),e._v(" "),a("a-modal",{attrs:{title:e.title,visible:e.visible,okText:"保存",cancelText:"取消",width:"1000px"},on:{ok:e.add_user,cancel:e.handleCancel}},[a("div",[a("div",{staticClass:"graybox"},[a("ul",{staticClass:"flex",staticStyle:{width:"100%","flex-wrap":"wrap"}},[a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("用户代码    "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入用户代码"},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("用户名称   "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入用户代码"},model:{value:e.user_code,callback:function(t){e.user_code=t},expression:"user_code"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("手机号码   "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入手机号码"},model:{value:e.cellphone,callback:function(t){e.cellphone=t},expression:"cellphone"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("电话号码   "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入电话号码"},model:{value:e.telphone,callback:function(t){e.telphone=t},expression:"telphone"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("电子邮箱   "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入电子邮箱"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("\n            所选机构\n            "),a("a-select",{staticStyle:{width:"250px","margin-left":"10px"},on:{change:e.handleOrgChange},model:{value:e.orgSelect,callback:function(t){e.orgSelect=t},expression:"orgSelect"}},e._l(e.orglist,function(t,s){return a("a-select-option",{key:s,attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])}),1)],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("密码 "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("状态\n            "),a("a-select",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{defaultValue:""},on:{change:e.handleStateChange},model:{value:e.stateSelect,callback:function(t){e.stateSelect=t},expression:"stateSelect"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("正在使用")]),e._v(" "),a("a-select-option",{attrs:{value:"1"}},[e._v("已经离职")])],1)],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{width:"45%","margin-bottom":"10px","justify-content":"flex-end"}},[e._v("备注"),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)])]),e._v(" "),a("div",{staticClass:"graybox"},[a("a-table",{attrs:{rowSelection:e.lrowSelection,columns:e.columns_modal,dataSource:e.roleList},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(t))])}}])})],1)])]),e._v(" "),a("a-modal",{attrs:{title:"修改密码",okText:"保存",cancelText:"取消"},on:{ok:e.c_pass},model:{value:e.changepass_visible,callback:function(t){e.changepass_visible=t},expression:"changepass_visible"}},[a("ul",[a("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[e._v("\n        旧密码：  "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入旧密码："},model:{value:e.old_pass,callback:function(t){e.old_pass=t},expression:"old_pass"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[e._v("\n        新密码：  "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入新密码："},model:{value:e.new_pass,callback:function(t){e.new_pass=t},expression:"new_pass"}})],1),e._v(" "),a("li",{staticClass:"flex",staticStyle:{"margin-bottom":"10px","justify-content":"flex-end",width:"85%"}},[e._v("\n        确认密码：  "),a("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入确认密码："},model:{value:e.com_pass,callback:function(t){e.com_pass=t},expression:"com_pass"}})],1)])]),e._v(" "),a("div",[a("a-table",{attrs:{rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data},scopedSlots:e._u([{key:"name",fn:function(t){return a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(t))])}}])})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(e){a("HAOt")},"data-v-4f29d922",null);t.default=h.exports},HAOt:function(e,t){}});
//# sourceMappingURL=41.19342dfd61a7d25df389.js.map